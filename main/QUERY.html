<html>
<head>
<title>The XMLD-SQL proposed query specification</title>
</head>
<body>
<pre><xmp>
The XMLD-SQL proposed query specification: (by Khalid Al-Kary)
==========================================

The RETR string:
----------------
The RETR string is to specify the attributes/text to be retrieved out of the 
selected elements. It's a comma-separated list of the required items, for 
example:

name,age,e-mail

The above retireves the name, age and e-mail attributes of each selected 
elements.

A second example:

name,age,(text)

The above retrieves the name and age attributes of each selected element in 
addition to the text of that element.

This RETR string simply means "all" and retrieves all the attributes and 
the text of each element:

*

This final RETR string retrieves all the attributes of each element:

@

Conditionals:
-------------
SQL-compaitable conditionals are to be supported by the OpenXMLD--treating
attributes as column names, and the text of an element as a column called 
"(text)", and the tag name of an element as another attribute called 
"(tagname)"

The following should be valid:

attr1=val AND (attr2=val2 OR attr2=val3)
(text)=val AND NOT attr1=val2 AND (tagname)=val3

[...]

The WHERE string:
-----------------
Although conditionals are completely enough for any SQL engine to make
a WHERE clause, that's not the case within the OpenXMLD, because XML documents 
aren't flat as database tables are. Therefore the WHERE string of the OpenXMLD,
is a compound conditional--a group of conditionals separated by colons, each 
one of them sets the conditional of the level relative to its order in the 
list.

for example:

attr1=val1 AND attr2=val2:attr5=val10 OR attr3=val6: ...
->LEVEL 1 conditional<---:->LEVEL 2 conditional <--: ...

observe that tree:

<root attr1=[val1] attr2=[val2]>
 <first_level attr5=[val10] attr3=[val6]/> <-- this is the only matching element
 <first_level attr5=[not val10] attr4=[not val6]/>
</root>

Note: The default behaviour when there isn't a WHERE statement is to loop
through all the elements in the tree (in a cross level manner).

Note: Not to include a conditional you can write "-" in the corresponding
level in the where statement.

The FILE string:
----------------
Obviously the FILE string replaces the table name space in the normal SQL q-
uery. However it's slightly different, because it can contain the path to 
that file, or even relative to the current directory (explained later).

for example:

"/file1.xml"
"stock/file2.xml"


In this directory structue:

Server Root (/)
    |
    |__ first_database <-- this is the current dir
    	     |
	     |__ stock
	     |     |
	     |     |__ file2.xml
             |
             |__ file1.xml

The DIR string:
---------------
The DIR string is simply a directory in the server's document tree, either r-
elative to the current directory or absolute starting from the server's root, 
for example:

"/first_dir"
"relative_direcory/dir2"


The USE clause:
---------------
The USE caluse of the OpenXMLD does exactly as SQL's USE clause. SQL's use ho-
wever selects a database, while the USE clause selects a directory and makes 
it the current directory of the connection.

Rule: use <DIR>

The SELECT clause:
------------------

Rule: select <RETR> from <FILE> [where <WHERE>]

--to be continued
</xmp>
</pre>
</body>
</html>
